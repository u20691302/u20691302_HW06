@model u20691302_HW06.Models.product

<h3>Product Details</h3>
<div class="panel panel-default">
    <div class="panel-heading">
        @Html.DisplayFor(model => model.product_name)
    </div>
    <div class="panel-body">
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.product_name)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.product_name)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.model_year)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.model_year)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.list_price)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.list_price)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.brand.brand_name)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.brand.brand_name)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.category.category_name)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.category.category_name)
            </dd>
        </dl>
    </div>

    <div class="panel-footer">
        <table class="table table-striped table-condensed table-bordered">
            <thead>
                <tr>
                    <th>
                        Store
                    </th>
                    <th>
                        Quantity
                    </th>
                </tr>
            </thead>

            @{
                var stock = Model.stocks.Where(p => p.product_id == Model.product_id);
                var result = stock.Select(p => new { p.store.store_name, p.quantity }).ToList();
            }

            @foreach (var item in result)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.store_name)
                    </td>
                    <td>
                        @if (item.quantity > 0)
                        {
                            @Html.DisplayFor(modelItem => item.quantity)
                        }
                        else
                        {
                            <p class="text-danger">Out of Stock</p>
                        }
                    </td>
                </tr>
            }
        </table>
    </div>
</div>